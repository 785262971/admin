package zp_test.springboot_server.zp.util;/** * Created by wangxiaowei on 17/5/15. */import java.util.concurrent.locks.ReentrantLock;public class SimpleNumberUuidProvider {    private static final long UniqueID_BEGIN_TIME = 1388505600000L;    private static long CURRENT_MILLIS = 0L;    private static long LAST_UUID = 0L;    private static int COUNT_PER_MILLIS = 0;    private static final ReentrantLock lock = new ReentrantLock();    private SimpleNumberUuidProvider() {        throw new AssertionError();    }    public static long uuid() {        lock.lock();        long uuid;        try {            uuid = System.currentTimeMillis() - 1388505600000L;            if(uuid <= CURRENT_MILLIS && COUNT_PER_MILLIS < 16) {                uuid = ++LAST_UUID;                ++COUNT_PER_MILLIS;            } else {                if(uuid <= CURRENT_MILLIS) {                    uuid = ++CURRENT_MILLIS;                } else {                    CURRENT_MILLIS = uuid;                }                uuid = (uuid << 16) + (long)ServerSequence.SERVER_ID;                uuid <<= 4;                LAST_UUID = uuid;                COUNT_PER_MILLIS = 1;            }        } finally {            lock.unlock();        }        return uuid;    }}